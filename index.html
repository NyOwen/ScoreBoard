<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>å¤šåŠŸèƒ½é€šç”¨è¨ˆåˆ†æ¿</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      padding: 2em;
      text-align: center;
    }
    .container {
      background: white;
      max-width: 700px;
      margin: auto;
      padding: 2em;
      border-radius: 12px;
      box-shadow: 0 0 10px #aaa;
    }
    input, select, button {
      padding: 0.6em;
      margin: 0.5em;
      font-size: 1em;
    }
    .teams {
      display: flex;
      justify-content: space-around;
      margin: 1.5em 0;
    }
    .team {
      width: 40%;
    }
    .set{
      font-size: 1.5em;
      margin: 0.3em 0;
    }
    .score {
      font-size: 3em;
      margin: 0.3em 0;
    }
    #scoreSection {
      display: none;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>é€šç”¨æ¯”è³½è¨ˆåˆ†æ¿</h2>

  <!-- âš™ï¸ è¨­å®šå€ -->
  <div id="setupSection">
    <div>
      <label>æ¯”è³½æ¨¡å¼ï¼š</label>
      <select id="matchType">
        <option value="2">BO3ï¼ˆ2å¤§åˆ†å‹ï¼‰</option>
        <option value="3" selected>BO5ï¼ˆ3å¤§åˆ†å‹ï¼‰</option>
        <option value="4">BO7ï¼ˆ4å¤§åˆ†å‹ï¼‰</option>
      </select>
    </div>

    <div>
      <input type="text" id="teamAName" placeholder="éšŠä¼Aåç¨±" value="éšŠä¼A">
      <input type="text" id="teamBName" placeholder="éšŠä¼Båç¨±" value="éšŠä¼B">
    </div>

    <button onclick="startMatch()">âœ… é–‹å§‹æ¯”è³½</button>
  </div>

  <!-- ğŸ€ è¨ˆåˆ†å€ -->
  <div id="scoreSection">
    <div class="teams">
      <div class="team">
        <h3 id="nameA">éšŠä¼A</h3>
        <div class="set">Set:<span id="setA">0</span></div>
        <div class="score"><span id="scoreA">0</span></div>
        <button onclick="addPoint('A')">+1</button>
        <button onclick="subPoint('A')">-1</button>
      </div>

      <div class="team">
        <h3 id="nameB">éšŠä¼B</h3>
        <div class="set">Set:<span id="setB">0</span></div>
        <div class="score"><span id="scoreB">0</span></div>
        <button onclick="addPoint('B')">+1</button>
        <button onclick="subPoint('B')">-1</button>
      </div>
    </div>

    <button onclick="resetMatch()">ğŸ” é‡ç½®æ¯”è³½</button>
  </div>
</div>

<script>
  // åŸºç¤è®Šæ•¸
  let scoreA = 0, scoreB = 0;
  let setA = 0, setB = 0;
  const SCORE_TO_WIN_SET = 11;
  let setWinTarget = 3;
  let matchStarted = false;

  // è¨­å®š -> è¨ˆåˆ†æµç¨‹
  function startMatch() {
    const nameA = document.getElementById("teamAName").value.trim();
    const nameB = document.getElementById("teamBName").value.trim();

    if (!nameA || !nameB) {
      alert("è«‹è¼¸å…¥å…©éšŠåç¨±ï¼");
      return;
    }

    setWinTarget = parseInt(document.getElementById("matchType").value);

    // è¨­å®šåç¨±
    document.getElementById("nameA").textContent = nameA;
    document.getElementById("nameB").textContent = nameB;

    // é¡¯ç¤ºè¨ˆåˆ†å€ï¼Œéš±è—è¨­å®šå€
    document.getElementById("setupSection").style.display = "none";
    document.getElementById("scoreSection").style.display = "block";

    matchStarted = true;
  }

  function addPoint(team) {
    if (!matchStarted) return;

    if (setA >= setWinTarget || setB >= setWinTarget) {
      alert("æ¯”è³½å·²çµæŸï¼");
      return;
    }

    if (team === 'A') {
      scoreA++;
    } else {
      scoreB++;
    }

    updateScores();

    if (scoreA >= SCORE_TO_WIN_SET || scoreB >= SCORE_TO_WIN_SET) {
      if (scoreA > scoreB) {
        setA++;
        alert(`${document.getElementById("nameA").textContent} è´å¾—æ­¤å±€ï¼`);
      } else {
        setB++;
        alert(`${document.getElementById("nameB").textContent} è´å¾—æ­¤å±€ï¼`);
      }
      scoreA = 0;
      scoreB = 0;
      updateScores();
      checkMatchEnd();
    }
  }
    function subPoint(team) {
    if (!matchStarted) return;

    if (setA >= setWinTarget || setB >= setWinTarget) {
      alert("æ¯”è³½å·²çµæŸï¼");
      return;
    }

    if (team === 'A') {
      if(scoreA>0){
        scoreA--;
      }      
    } 
    else {
       if(scoreB>0){
        scoreB--;
       }      
    }

    updateScores();
}
  function updateScores() {
    document.getElementById("scoreA").textContent = scoreA;
    document.getElementById("scoreB").textContent = scoreB;
    document.getElementById("setA").textContent = setA;
    document.getElementById("setB").textContent = setB;
  }

  function checkMatchEnd() {
    if (setA >= setWinTarget || setB >= setWinTarget) {
      const winner = setA > setB
        ? document.getElementById("nameA").textContent
        : document.getElementById("nameB").textContent;
      alert(`ğŸ† æ¯”è³½çµæŸï¼å‹æ–¹ç‚º ${winner}`);
    }
  }

  function resetMatch() {
    if (!confirm("ç¢ºå®šè¦é‡ç½®æ•´å ´æ¯”è³½ï¼Ÿ")) return;
    scoreA = 0; scoreB = 0;
    setA = 0; setB = 0;
    matchStarted = false;

    updateScores();

    // é‡ç½®ç•«é¢
    document.getElementById("setupSection").style.display = "block";
    document.getElementById("scoreSection").style.display = "none";
  }
</script>

</body>
</html>
